<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>제목을 지정!!!!</title>

    <link
      th:href="@{https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css}"
      rel="stylesheet"
    />
    <link th:href="@{/css/theme_styles.css}" rel="stylesheet" />
    <link th:href="@{/css/reset.css}" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js" crossorigin="anonymous"></script>
    <script th:src="@{/webjars/jquery/3.6.0/jquery.min.js}"></script>
    <style>
      input[type="file"] {
        position: absolute;
        width: 0;
        height: 0;
        padding: 0;
        overflow: hidden;
        border: 0;
      }

      .song-register-content {
        margin: 30px;
      }
      .preview-thumnail {
        width: 100%;
        height: 30%;
      }
      .preview-thumnail img {
        width: 100%;
        height: 100%;
      }

      .song-register {
      }

      .song-register-btn {
        display: flex;
        margin-bottom: 20px;
      }

      .song-register span {
        border: 1px solid #666666;
        padding: 5px;
      }
    </style>
  </head>
  <body>
    <form class="song-register-content" th:action="@{/musicpost}" method="post" enctype="multipart/form-data">
      <div class="song-title">
        <input type="text" id = "title" name = "title"/>
        <p th:text="${errorMsg}"></p>
        <input type="text" id = "memberNo" name = "memberNo"/>
        <input type="text" id = "articleNo" name = "articleNo"/>
      </div>
      <div class="preview-thumnail">
        <img id="registered_img" style="visibility: hidden" src="" alt="" />
      </div>
      <div class="song-register">
        <div class="song-register-btn">
          <div class="song-register-thumnail">
            <label id="thumnail_register" for="image">
              <span>썸네일 등록</span>
            </label>
            <input
              type="file"
              id="image"
              name = "image"
              accept="image/*"
              onchange="setThumbnail(event);"
            />
          </div>
          <div class="song-register-file">
            <label id="songfile_register" for="audio">
              <span>파일 등록</span>
            </label>
            <input type="file" id="audio" name = "audio" accept="audio/*" />
          </div>
        </div>
        <div>
          <button type="submit">등록</button>
        </div>
      </div>
    </form>

    <script th:src="@{/js/jquery-3.6.0.min.js}"></script>
    <script>
      //이미지
      function setThumbnail(event) {
        var reader = new FileReader();
        reader.onload = function (event) {
          var img = document.getElementById("registered_img");
          let previewText = document.getElementById("preview-text");

          img.setAttribute("src", event.target.result);
          img.style.visibility = "visible";
        };
        reader.readAsDataURL(event.target.files[0]);
      }
    </script>
  </body>
</html>
